(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{27:function(e,t,n){e.exports=n(37)},32:function(e,t,n){},33:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(13),o=n.n(i),s=(n(32),n(33),n(14)),l=n(15),c=n(5),u=n(21),m=n(20);var d=function(e){var t=e.row,n=e.col,r=function(){var t=e.tile;return t.revealed?t.mine?"M":0===t.mineCount?"":t.mineCount:t.flag?"F":null}(),i=function(e){var t="tile";switch(e){case"":t="tile empty";break;case 1:t="tile blue";break;case 2:t="tile green";break;case 3:t="tile red";break;case 4:t="tile darkblue";break;case 5:t="tile darkred";break;case 6:t="tile bluegreen";break;case 7:t="tile black";break;case 8:t="tile darkgrey";break;case"M":t="tile mine";break;case"F":t="tile flag"}return t}(r);return a.a.createElement("td",{className:i,onClick:function(){return e.clickHandler(t,n)},onContextMenu:function(){return e.contextHandler(t,n)},onMouseDown:function(){return e.onMouseDown(t,n)},onMouseUp:function(){return e.onMouseUp()}},r)},h=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={theBoard:r.initTempBoard(r.props.rows,r.props.cols),gameStarted:!1},r.tileLeftClickedHandler=r.tileLeftClickedHandler.bind(Object(c.a)(r)),r.tileRightClickedHandler=r.tileRightClickedHandler.bind(Object(c.a)(r)),r.longClickPress=r.longClickPress.bind(Object(c.a)(r)),r.longClickRelease=r.longClickRelease.bind(Object(c.a)(r)),r}return Object(l.a)(n,[{key:"resetBoard",value:function(e,t){var n=this;console.log("resetting..."),this.props.stopTimer(),this.props.resetTimer(),this.props.resetFlags(),this.setState((function(){return{theBoard:n.initTempBoard(e,t),gameStarted:!1}}))}},{key:"changeDifficulty",value:function(e,t){var n=this;this.setState((function(){return{theBoard:n.initTempBoard(e,t),gameStarted:!1}})),this.props.stopTimer(),this.props.resetTimer()}},{key:"createEmptyBoard",value:function(e,t){for(var n=[],r=0;r<e;r++){n.push([]);for(var a=0;a<t;a++)n[r][a]={row:r,col:a,mine:!1,mineCount:0,revealed:!1,flag:!1}}return n}},{key:"getRandomInt",value:function(e){return Math.floor(Math.random()*Math.floor(e))}},{key:"checkProximity",value:function(e,t,n,r){return(e!==n||t!==r)&&((e!==n-1||t!==r)&&((e!==n+1||t!==r)&&((e!==n||t!==r-1)&&((e!==n||t!==r+1)&&((e!==n-1||t!==r-1)&&((e!==n-1||t!==r+1)&&((e!==n+1||t!==r-1)&&(e!==n+1||t!==r+1))))))))}},{key:"placeMines",value:function(e,t,n){for(var r,a,i=this.props,o=i.rows,s=i.cols,l=i.mines,c=0;c<l;){for(;r=this.getRandomInt(o),a=this.getRandomInt(s),!this.checkProximity(r,a,t,n););e[r][a].mine||(e[r][a].mine=!0,c++)}return e}},{key:"checkSurroundingArea",value:function(e,t,n){var r=[],a=this.props,i=a.rows,o=a.cols;return e>0&&r.push(n[e-1][t]),e<i-1&&r.push(n[e+1][t]),t>0&&r.push(n[e][t-1]),t<o-1&&r.push(n[e][t+1]),e>0&&t>0&&r.push(n[e-1][t-1]),e>0&&t<o-1&&r.push(n[e-1][t+1]),e<i-1&&t>0&&r.push(n[e+1][t-1]),e<i-1&&t<o-1&&r.push(n[e+1][t+1]),r}},{key:"findMines",value:function(e){for(var t=this,n=e,r=this.props,a=r.rows,i=r.cols,o=0;o<a;o++)for(var s=0;s<i;s++)e[o][s].mine||function(){var e=0;t.checkSurroundingArea(o,s,n).map((function(t){t.mine&&e++})),n[o][s].mineCount=e}();return n}},{key:"findRevealedTiles",value:function(e){for(var t=this.props,n=t.rows,r=t.cols,a=0,i=0;i<n;i++)for(var o=0;o<r;o++)e[i][o].revealed&&(a+=1);return a}},{key:"uncoverEmptyTiles",value:function(e,t,n){var r=this;return this.checkSurroundingArea(e,t,n).map((function(e){e.mine||e.revealed||e.flag||(n[e.row][e.col].revealed=!0,0===e.mineCount&&r.uncoverEmptyTiles(e.row,e.col,n))})),n}},{key:"longClickPress",value:function(e,t){var n=this;this.longClickTimer=setTimeout((function(){n.tileRightClickedHandler(e,t)}),1e3)}},{key:"longClickRelease",value:function(){clearTimeout(this.longClickTimer)}},{key:"tileRightClickedHandler",value:function(e,t){var n=this.state.theBoard;if(n[e][t].revealed)return null;n[e][t].flag?(this.props.increment(),n[e][t].flag=!1):(this.props.decrement(),n[e][t].flag=!0),this.setState((function(){return{theBoard:n}}))}},{key:"revealMines",value:function(e,t){for(var n=this.state.theBoard,r=0;r<e;r++)for(var a=0;a<t;a++)n[r][a].mine&&(n[r][a].revealed=!0);this.setState((function(){return{theBoard:n}}))}},{key:"tileLeftClickedHandler",value:function(e,t){var n=this,r=this.props,a=r.rows,i=r.cols,o=r.mines,s=this.state,l=s.gameStarted,c=s.theBoard,u=this.findRevealedTiles(c),m=c;if(u===a*i-o-1)return alert("You Win!"),this.resetBoard(a,i),null;if(l){if(console.log("Row: ".concat(e,", Col: ").concat(t,", Revealed: ").concat(m[e][t].revealed,", Flag: ").concat(m[e][t].flag,", Mine: ").concat(m[e][t].mine,", Mine Count: ").concat(m[e][t].mineCount)),m[e][t].revealed)return null;if(m[e][t].flag)return null;if(m[e][t].mine)return alert("You Lost..."),this.resetBoard(a,i),null;0===m[e][t].mineCount?(m[e][t].revealed=!0,m=this.uncoverEmptyTiles(e,t,m)):m[e][t].revealed=!0,this.setState((function(){return{theBoard:m}}))}else this.setState((function(){return{theBoard:n.initRealBoard(e,t,a,i),gameStarted:!0}}))}},{key:"initTempBoard",value:function(e,t){var n=this.createEmptyBoard(e,t);return document.addEventListener("contextmenu",(function(e){e.preventDefault()})),n}},{key:"initRealBoard",value:function(e,t,n,r){var a=this.createEmptyBoard(n,r);return a=this.placeMines(a,e,t),a=this.findMines(a),a=this.uncoverEmptyTiles(e,t,a),this.props.startTimer(),a}},{key:"render",value:function(){var e=this;return this.state.theBoard.map((function(t,n){return a.a.createElement("tr",{row:n},t.map((function(t,r){return a.a.createElement(d,{row:n,col:r,tile:t,clickHandler:e.tileLeftClickedHandler,contextHandler:e.tileRightClickedHandler,onMouseDown:e.longClickPress,onMouseUp:e.longClickRelease})})))}))}}]),n}(r.Component),f=n(11),v=n(26),p=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={rows:0,cols:0,mines:0,flags:0,time:0,start:0},r.boardElement=a.a.createRef(),r.decrement=r.decrement.bind(Object(c.a)(r)),r.increment=r.increment.bind(Object(c.a)(r)),r.changeDifficulty=r.changeDifficulty.bind(Object(c.a)(r)),r.startTimer=r.startTimer.bind(Object(c.a)(r)),r.stopTimer=r.stopTimer.bind(Object(c.a)(r)),r.resetTimer=r.resetTimer.bind(Object(c.a)(r)),r.resetFlags=r.resetFlags.bind(Object(c.a)(r)),r}return Object(l.a)(n,[{key:"componentWillMount",value:function(){console.log("checking screen...");var e,t,n,r=0;window.screen.width<=768?(console.log("mobile..."),e=11,t=7,n=10,r=10):(e=8,t=10,n=10,r=10),this.setState((function(){return{rows:e,cols:t,mines:n,flags:r}}))}},{key:"decrement",value:function(){console.log("in decrement...");var e=this.state.flags-1;this.setState((function(t,n){return{flags:e}}))}},{key:"increment",value:function(){console.log("in increment...");var e=this.state.flags+1;this.setState((function(t,n){return{flags:e}}))}},{key:"changeDifficulty",value:function(e){var t,n,r,a=0;"easy"===e&&(window.screen.width<=768?(t=11,n=7,r=10,a=10):(t=8,n=10,r=10,a=10),this.setState((function(e,i){return{rows:t,cols:n,mines:r,flags:a}}))),"medium"===e&&(window.screen.width<=768?(t=18,n=11,r=40,a=40):(t=14,n=18,r=40,a=40),this.setState((function(e,i){return{rows:t,cols:n,mines:r,flags:a}}))),this.boardElement.current.changeDifficulty(t,n)}},{key:"startTimer",value:function(){var e=this;this.setState({start:Date.now()}),this.timer=setInterval((function(){return e.setState({time:Date.now()-e.state.start})}),1e3)}},{key:"stopTimer",value:function(){clearInterval(this.timer-1),clearInterval(this.timer)}},{key:"resetTimer",value:function(){this.setState({time:0,start:Date.now()})}},{key:"resetFlags",value:function(){this.setState({flags:this.state.mines})}},{key:"render",value:function(){var e=this.state,t=e.rows,n=e.cols,r=e.mines,i=e.flags,o=e.time;return a.a.createElement("div",{className:"the-game"},a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:n},a.a.createElement("div",{className:"col"},"Flags: ",i),a.a.createElement("div",{className:"col"},"Timer: ",Math.floor(o/1e3)),a.a.createElement("div",{className:"col"},a.a.createElement(v.a,{id:"dropdown-basic-button",title:"Difficulty"},a.a.createElement(f.a.Item,{eventKey:"easy",onSelect:this.changeDifficulty},"Easy"),a.a.createElement(f.a.Item,{eventKey:"medium",onSelect:this.changeDifficulty},"Medium")))))),a.a.createElement("tbody",null,a.a.createElement(h,{ref:this.boardElement,rows:t,cols:n,mines:r,decrement:this.decrement,increment:this.increment,startTimer:this.startTimer,stopTimer:this.stopTimer,resetTimer:this.resetTimer,resetFlags:this.resetFlags}))))}}]),n}(r.Component);var g=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(p,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.51917db4.chunk.js.map